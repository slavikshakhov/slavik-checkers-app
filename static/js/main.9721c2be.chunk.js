(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,a,t){e.exports=t(39)},24:function(e,a,t){},32:function(e,a,t){},33:function(e,a,t){},34:function(e,a,t){},35:function(e,a,t){},36:function(e,a,t){},37:function(e,a,t){},38:function(e,a,t){},39:function(e,a,t){"use strict";t.r(a);var o=t(0),r=t.n(o),n=t(9),l=t.n(n),c=(t(24),t(25),t(16)),s=t(1),i=t(2),p=t(5),u=t(4),m=t(3),g=function(e){for(var a=e.board.board,t=e.activePlayer,o=0;o<a.length;o++)for(var r=0;r<8;r++)if(a[o][r]&&a[o][r].player===t&&!a[o][r].isKing&&f(o,r,e))return console.log("at least one of the pieces can jump"),!0},f=function(e,a,t){var o=[],r=t.activePlayer,n=t.board.board,l=2===r?-1:1,c=2===r?-2:2,s=!1;(1===r&&e<=5||2===r&&e>=2)&&(s=!0);var i=function(t){var o=n[e][a];if(o&&!o.isKing&&s&&!n[e+c][a+2*t]&&n[e+l][a+t]&&n[e+l][a+t].player!==r)return console.log("".concat(r,"- player can jump from ").concat(e," - ").concat(a," to ").concat(e+c," - ").concat(a+2*t)),{rowTarget:e+c,colTarget:a+2*t}};if(a<=5){var p=i(1);p&&o.push(p)}if(a>=2){var u=i(-1);u&&o.push(u)}return o.length>0?o:void 0},d=function(e,a,t){var o=[],r=t.board.board,n=t.activePlayer,l=r[e][a],c=e+(2===n?-1:1),s=1===n&&e<=6||2===n&&e>=1,i=function(e){if(!r[c][a+e])return console.log("can move to ".concat(c," - ").concat(a+e)),{rowTarget:c,colTarget:a+e}};if(console.log(s),l&&l.player===n&&s){if(a<=6){var p=i(1);p&&o.push(p)}if(a>=1){var u=i(-1);u&&o.push(u)}}return o.length>0?o:void 0},y=function(e){for(var a=e.board.board,t=e.activePlayer,o=0;o<a.length;o++)for(var r=0;r<8;r++)if(a[o][r]&&a[o][r].player===t&&a[o][r].isKing&&v(o,r,e))return console.log("at least one of the pieces can jump"),!0},v=function(e,a,t){var o=[],r=t.board.board,n=t.activePlayer,l=function(t,l){for(var c=t>0?7:0,s=l>0?7:0,i=e,p=a;i!==c&&p!==s;i+=t,p+=l)if(r[i][p]&&r[i][p].player!==n){if(r[i+t][p+l])return;r[i+t][p+l]||o.push({rowTarget:i+t,colTarget:p+l})}};return l(1,1),l(1,-1),l(-1,1),l(-1,-1),o.length>0?o:void 0},b=function(e,a,t){var o=t.board.board,r=0===a?-1:1,n=7===a?-1:1,l=0===e?-1:1,c=7===e?-1:1;return a<=7&&a>=0&&e<=7&&e>=0&&!(o[e-l][a-r]&&o[e-l][a+n]&&o[e+c][a-r]&&o[e+c][a+n])};t(32),t(33);function h(e){var a=e.square,t="piece ";return 1===a.player?t+="white ":t+="black ",a.isKing?t+="king ":t+="",r.a.createElement("div",{className:t})}var w=function(e){var a,t,o=e.square,n=e.rowNum,l=e.colNum,c=e.squareClick,s=e.start,i=e.selRow,p=e.selCol;return i===n&&p===l&&s&&(a=i===n&&p===l&&s?"ba bw2 b--dark-red ":" "),(n%2===0&&l%2===0||n%2!==0&&l%2!==0)&&(t="dark "),r.a.createElement("div",{className:"col dib w3 h3  "+a+" "+t,onClick:function(){return c(n,l,o)}},o?r.a.createElement(h,{square:o}):null)},E=function(e){var a=e.row,t=e.rowNum,o=e.squareClick,n=e.start,l=e.selRow,c=e.selCol;return r.a.createElement("div",null,a.map(function(e,a){return r.a.createElement(w,{key:a,square:e,colNum:a,rowNum:t,squareClick:o,start:n,selRow:l,selCol:c})}))},k=(t(34),function(e){var a=e.board,t=e.squareClick,o=e.start,n=e.selRow,l=e.selCol,c=e.activePlayer,s=a.map(function(e,a){return r.a.createElement(E,{key:a,row:e,rowNum:a,squareClick:t,start:o,selRow:n,selCol:l,activePlayer:c})});return r.a.createElement("div",null,r.a.createElement("div",{className:"board"},s))}),j=(t(35),function(e){Object(p.a)(t,e);var a=Object(u.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"render",value:function(){var e,a="header flex c ba b--black justify-center items-center pv3",t="flex c ba b--black justify-center items-center pv3 f5 fw5 avenir",o="ttc f4 fw7 ",n=["a","b","c","d","e","f","g","h"],l=this.props.state,c=l.read,s=l.players,i=l.count;return console.log(c),console.log(s),c.length>0&&(e=c.map(function(e,a){var l=e.relocatedFrom,c=e.relocatedTo,i=e.capturedAt?e.capturedAt:"",p=1===e.player?s[0]:s[1];return 1===e.player?o+=" player1":o+=" player2",r.a.createElement("div",{key:a,className:"flex flex-row flex-wrap w-100"},r.a.createElement("div",{className:"".concat(t," ").concat(o)},p),r.a.createElement("div",{className:t},e.relocType,"d \xa0 \xa0",r.a.createElement("span",{className:"b f5"},l.r,n[l.c])," \xa0 to \xa0",r.a.createElement("span",{className:"b f5"},c.r,n[c.c])),r.a.createElement("div",{className:t},r.a.createElement("span",{className:"b f5"},i.r,n[i.c]," ")))})),r.a.createElement("div",{className:"table w-80 tc"},s&&r.a.createElement("p",{className:" f4 fw9 tracked-mega ttu whoPlays"},s[0]," playing with ",s[1]),s&&r.a.createElement("p",{className:"ttu green f4 b"},r.a.createElement("span",{className:""},"figures left:"),"  ",r.a.createElement("span",{className:"player1"},s[0]),"  "," ",i[0],"   ",r.a.createElement("span",{className:"player2"},s[1]),"  "," ",i[1]),r.a.createElement("div",{className:"flex flex-row w-100 bg-blue fw6 ttu"},r.a.createElement("div",{className:a},"player"),r.a.createElement("div",{className:a},"moves"),r.a.createElement("div",{className:a},"captured at")),r.a.createElement("div",{className:"cols-wrapper"},e))}}]),t}(o.Component)),C=Object(m.b)(function(e){return console.log(e),{state:e}})(j),O=t(7),N=(t(36),function(e){Object(p.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(s.a)(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(e=a.call.apply(a,[this].concat(r))).state={player1:"",player2:"",warning:!1},e.onInputChange=function(a){var t,o=a.target.name,r=a.target.value;e.setState((t={},Object(O.a)(t,o,r),Object(O.a)(t,"warning",!1),t))},e.onPlayersInfoSumbit=function(a){a.preventDefault();var t=e.state,o=t.player1,r=t.player2;o.length>0&&r.length>0?e.props.setPlayers([e.state.player1,e.state.player2],!0):0!==o.length&&0!==r.length||e.setState({warning:!0})},e}return Object(i.a)(t,[{key:"render",value:function(){var e=" pv2 ph3 ma2 mb4 w-100 green b ttu tracked",a=" ttu tracked light-gray",t=this.state.warning?" o-100":" o-0";return r.a.createElement("div",{className:"tc"},r.a.createElement("form",{onSubmit:this.onPlayersInfoSumbit},r.a.createElement("div",{className:a},"who plays with light figures?"),r.a.createElement("input",{className:e,type:"text",name:"player1",value:this.state.value,onChange:this.onInputChange}),r.a.createElement("div",{className:a},"who plays with dark figures?"),r.a.createElement("input",{className:e,type:"text",name:"player2",value:this.state.value,onChange:this.onInputChange}),r.a.createElement("p",{className:"warning ".concat(" ttu bg-pink red f6 shadow-4 w-100 br1 pv2"," ").concat(t)},"Please fill in bouth fields"),r.a.createElement("button",{className:"p3 pv2 ph5 grow pointer bg-blue mt5 ttu"},"submit")))}}]),t}(o.Component)),R=Object(m.b)(null,function(e){return{setPlayers:function(a,t){return e({type:"SET_PLAYERS",payload:{players:a,stopAnimation:t}})}}})(N),T=(t(37),function(e){return r.a.createElement("div",{className:"".concat(" userInfo pa6"," bg-green")},e.children)}),P=(t(38),function(e){Object(p.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(s.a)(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(e=a.call.apply(a,[this].concat(r))).squareClick=function(a,t,o){console.log(a,t,o);var r=e.props.state,n=r.board.board,l=r.start,s=r.activePlayer,i=r.mustJump,p=r.selSquare,u=e.props.setMustJump;if(g(e.props.state)||y(e.props.state)?(u(!0),i=!0):(u(!1),i=!1),console.log("after load, after setting to true,  before click mustJump is ".concat(i)),console.log(!!g(e.props.state)),console.log(y(e.props.state)),console.log("after click mustJump is ".concat(i)),console.log("start after click is ".concat(l)),l){if(l){var m=p.selRow,h=p.selCol,w=p.relocationType;if(!o&&p.player===s){var E=p.targets;if(E){var k,j=Object(c.a)(E);try{for(j.s();!(k=j.n()).done;){var C=k.value;console.log(C),console.log(a===C.rowTarget),a===C.rowTarget&&t===C.colTarget&&(console.log(w),"jump"===w?e.pieceOrKingJump(p,a,t,n):"move"===w&&(console.log("piece can move now"),e.pieceMove(p,a,t,n)))}}catch(T){j.e(T)}finally{j.f()}}else E||n[m][h].isKing&&"move"===w&&(console.log("king will move from ".concat(p.selRow," - ").concat(p.selCol," to ").concat(a," - ").concat(t)),e.kingMove(p,a,t,n))}}}else if(o)if(o.player!==s||o.isKing){if(o.player===s&&o.isKing)if(i){console.log("is king");var O=v(a,t,e.props.state);O&&(console.log("this king must jump"),e.props.pieceOrKingCouldRelocate("jump",O,a,t,s),e.props.setStart(!0))}else i||b(a,t,e.props.state)&&(console.log("this king cannot jump but can move"),console.log("king selected at ".concat(a," ").concat(t)),e.props.pieceOrKingCouldRelocate("move",null,a,t,s),e.props.setStart(!0))}else if(console.log("is piece"),i){if(f(a,t,e.props.state)){console.log("this piece must jump");var N=f(a,t,e.props.state);e.props.pieceOrKingCouldRelocate("jump",N,a,t,s),e.props.setStart(!0)}}else if(!i&&d(a,t,e.props.state)&&!i){var R=d(a,t,e.props.state);e.props.pieceOrKingCouldRelocate("move",R,a,t,s),e.props.setStart(!0),console.log("this piece cannot jump but can move")}},e.pieceOrKingJump=function(a,t,o,r){var n=a.selRow,l=a.selCol,c=a.player,s=e.props.state.activePlayer;if(s===c){var i=t-n>0?1:-1,p=o-l>0?1:-1;r[t][o]=r[n][l],r[t][o].isKing||(1===s&&7===t&&(r[t][o].isKing=!0,console.log("player: ".concat(s,", clickedRow: ").concat(t,", clickedCol: ").concat(o,", wasKing: ").concat(r[t][o].isKing))),2===s&&0===t&&(r[t][o].isKing=!0,console.log("player: ".concat(s,", clickedRow: ").concat(t,", clickedCol: ").concat(o,", wasKing: ").concat(r[t][o].isKing)))),r[n][l]=null,r[t-i][o-p]=null,console.log(r),console.log(s);var u=r[t][o];s=1===s?2:1;var m=!1;if(u.isKing){if(u.isKing){var g=v(t,o,e.props.state);g&&(s=1===s?2:1,e.props.pieceOrKingCouldRelocate("jump",g,t,o,s),m=!0)}}else{var d=f(t,o,e.props.state);d&&(s=1===s?2:1,e.props.pieceOrKingCouldRelocate("jump",d,t,o,s),m=!0,console.log(s))}console.log(s),console.log(c),e.props.setBoard({board:r}),e.props.setStart(m),e.props.setMustJump(m),e.props.changePlayer(s);var y={r:n,c:l},b={r:t,c:o},h={r:t-i,c:o-p};e.props.read("jump",c,y,b,h)}},e.pieceMove=function(a,t,o,r){var n=a.selRow,l=a.selCol,c=a.player,s=e.props.state.activePlayer;if(s===c){if(r[t][o]=r[n][l],!r[t][o].isKing){var i=1===s&&7===t;r[t][o].isKing=i}r[n][l]=null,console.log(r),s=1===s?2:1,e.props.setBoard({board:r}),e.props.setStart(!1),e.props.changePlayer(s);var p={r:n,c:l},u={r:t,c:o};e.props.read("move",c,p,u,null)}},e.kingMove=function(a,t,o,r){var n=a.selRow,l=a.selCol,c=a.player,s=e.props.state.activePlayer;if(s===c){console.log("king moving");for(var i=t-n>0?1:-1,p=o-l>0?1:-1,u=!1,m=n+i,g=l+p;m!==t&&g!==o;m+=i,g+=p){if(r[m][g])return;r[m][g]||(console.log("empty squares: ".concat(m,"-").concat(g)),console.log("selRow: ".concat(n,", selCol: ").concat(l,", clickedRow: ").concat(t,", clickedCol: ").concat(o)),console.log("iterRow ".concat(m," clickedRow ").concat(t)),u=!0)}if(u){r[t][o]=r[n][l],r[n][l]=null,console.log("player moving: ".concat(c," activePlayer: ").concat(s)),s=1===s?2:1,console.log("player moving: ".concat(c," activePlayer: ").concat(s)),e.props.setBoard({board:r}),e.props.setStart(!1),e.props.changePlayer(s);var f={r:n,c:l},d={r:t,c:o};e.props.read("move",c,f,d,null)}}},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this.props.state,a=e.board.board,t=e.start,o=e.activePlayer,n=e.selSquare,l=e.stopAnimation,c=l?"":" gameContainer";if(n)var s=n.selRow,i=n.selCol,p=n.targets;return console.log("in render after first load after click on piece that can jump, pieceJumpTargets is ".concat(JSON.stringify(p))),console.log("in render after selecting piece, start is ".concat(t)),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"".concat(c," pa5 flex justify-around ")},r.a.createElement(k,{board:a,squareClick:this.squareClick,start:t,selRow:s,selCol:i,activePlayer:o}),r.a.createElement("div",{className:"w-40"},r.a.createElement(C,null))),!l&&r.a.createElement(T,null,r.a.createElement(R,null)))}}]),t}(o.Component)),S=Object(m.b)(function(e){return{state:e}},function(e){return{setMustJump:function(a){return e({type:"SET_MUST_JUMP",payload:a})},pieceOrKingCouldRelocate:function(a,t,o,r,n){return e({type:"PIECE_COULD_RELOCATE",payload:{relocationType:a,targets:t,fromRow:o,fromCol:r,player:n}})},setStart:function(a){return e({type:"SET_START",payload:a})},setBoard:function(a){return e({type:"SET_BOARD",payload:a})},changePlayer:function(a){return e({type:"CHANGE_PLAYER",payload:a})},read:function(a,t,o,r,n){e({type:"READ",payload:{relocType:a,player:t,relocatedFrom:o,relocatedTo:r,capturedAt:n}})}}})(P);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=t(11),A=t(18),J=t(8),q={board:new(function(){function e(a){Object(s.a)(this,e),this.board=this.fillPieces(this.makeBoard(a))}return Object(i.a)(e,[{key:"makeBoard",value:function(e){for(var a=[],t=0;t<e;t++)a.push(Array(e).fill(null));return console.log("in makeBoard empty board is ".concat(JSON.stringify(a))),a}},{key:"fillPieces",value:function(e){for(var a=0,t={isKing:!1,continueToJump:!1},o=0;o<e.length;o++)for(var r=0;r<8;r+=2)o<=2?(o%2===0?e[o][r]=Object.assign({},t,{player:1,count:a}):e[o][r+1]=Object.assign({},t,{player:1,count:a}),a++):o>=5&&(o%2===0?e[o][r]=Object.assign({},t,{player:2,count:a}):e[o][r+1]=Object.assign({},t,{player:2,count:a}),a++);return e}}]),e}())(8),start:!1,mustJump:!1,selSquare:null,players:null,activePlayer:1,count:[12,12],read:[],stopAnimation:!1},_=Object(K.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(a.type){case"SET_MUST_JUMP":return Object.assign({},e,{mustJump:a.payload});case"PIECE_COULD_RELOCATE":return Object.assign({},e,{selSquare:{relocationType:a.payload.relocationType,targets:a.payload.targets,selRow:a.payload.fromRow,selCol:a.payload.fromCol,player:a.payload.player}});case"SET_START":return Object.assign({},e,{start:a.payload});case"SET_BOARD":return Object.assign({},e,{board:a.payload});case"CHANGE_PLAYER":return Object.assign({},e,{activePlayer:a.payload});case"SET_PLAYERS":return console.log(a.payload),Object(J.a)(Object(J.a)({},e),{},{players:a.payload.players,stopAnimation:a.payload.stopAnimation});case"READ":var t=1===a.payload.player?2:1,o=e.count;return"jump"===a.payload.relocType&&(1===t?o[0]-=1:o[1]-=1),Object(J.a)(Object(J.a)({},e),{},{count:o,read:[].concat(Object(A.a)(e.read),[{relocType:a.payload.relocType,player:a.payload.player,relocatedFrom:a.payload.relocatedFrom,relocatedTo:a.payload.relocatedTo,capturedAt:a.payload.capturedAt}])});default:return e}});l.a.render(r.a.createElement(m.a,{store:_},r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,1,2]]]);
//# sourceMappingURL=main.9721c2be.chunk.js.map